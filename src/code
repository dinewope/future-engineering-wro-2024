
int trigpinr = 45;
int echopinr = 44;
int trigpinl = 22;
int echopinl = 23;
int ena1 = 51;
int in1 = 50;
int in2 = 53;
int in3 = 52;
int in4 = 41;
int ena2 = 39;

void stopMotors() {
  digitalWrite(in1, LOW);
  digitalWrite(in2, LOW);
  digitalWrite(in3, LOW);
  digitalWrite(in4, LOW);
  analogWrite(ena1, 0);
  analogWrite(ena2, 0);
}

void setup() {
  pinMode(trigpinr, OUTPUT);

  pinMode(trigpinl, OUTPUT);

  pinMode(echopinr, INPUT);
  pinMode(echopinl, INPUT);
  pinMode(ena1, OUTPUT);
  pinMode(in1, OUTPUT);
  pinMode(in2, OUTPUT);
  pinMode(ena2, OUTPUT);
  pinMode(in3, OUTPUT);
  pinMode(in4, OUTPUT);
  Serial.begin(115200); // put your setup code here, to run once:
}



void moveForward() {

  digitalWrite(in3, HIGH);
  digitalWrite(in4, LOW);
  analogWrite(ena2, 255);
}

void turnLeft() {
  digitalWrite(in1, LOW);
  digitalWrite(in2, HIGH);
  analogWrite(ena1, 255);
  digitalWrite(in3, HIGH);
  digitalWrite(in4, LOW);
  analogWrite(ena2, 255);
}

void turnRight() {
  digitalWrite(in1, HIGH);
  digitalWrite(in2, LOW);
  analogWrite(ena1, 255);
  digitalWrite(in3, HIGH);
  digitalWrite(in4, LOW);
  analogWrite(ena2, 255);
}

void loop() {
  

 digitalWrite(trigpinr, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigpinr, LOW);
  long durationr = pulseIn(echopinr, HIGH);
  long distancer = durationr * 0.034 / 2;

   digitalWrite(trigpinl, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigpinl, LOW);
  long durationl = pulseIn(echopinl, HIGH);
  long distancel = durationl * 0.034 / 2;
  
  if(distancel - distancer < 10){ // Move forward if no obstacle ahead
  moveForward();

  }  
  else if(distancer > 50){
    turnRight();
  }
  else if(distancer < 10){
    turnLeft();
  }
else{
  stopMotors();
}

  }

